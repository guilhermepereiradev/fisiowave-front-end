<main>

    <section class="left-side">
        <mat-card>
            <mat-card-header>
                <mat-card-title>Meus dados</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <p><b>Nome:</b> {{ physio?.name }}</p>
                <p><b>Email:</b> {{ physio?.email }}</p>
            </mat-card-content>
        </mat-card>
    </section>


    <section class="right-side">
        <mat-card class="appointments-table">
            <mat-card-header>
                <mat-card-title>Sessões Marcadas</mat-card-title>
            </mat-card-header>

                <table mat-table [dataSource]="appointments" class="mat-elevation-z8">
                  
                    <ng-container matColumnDef="time">
                      <th mat-header-cell *matHeaderCellDef> Horário </th>
                      <td mat-cell *matCellDef="let appointment"> {{appointment.time | date : 'dd/MM/yyyy HH:mm' }} </td>
                    </ng-container>
            
                    <ng-container matColumnDef="patientName">
                      <th mat-header-cell *matHeaderCellDef> Paciente </th>
                      <td mat-cell *matCellDef="let appointment"> {{appointment.patient.name}} </td>
                    </ng-container>
            
                    <ng-container matColumnDef="patientPhone">
                      <th mat-header-cell *matHeaderCellDef> Celular </th>
                      <td mat-cell *matCellDef="let appointment"> {{appointment.patient.phoneNumber}} </td>
                    </ng-container>
            
                    <ng-container matColumnDef="patientEmail">
                      <th mat-header-cell *matHeaderCellDef> Email </th>
                      <td mat-cell *matCellDef="let appointment"> {{ appointment.patient.email}} </td>
                    </ng-container>
                    
                    <ng-container matColumnDef="view">
                        <th mat-header-cell *matHeaderCellDef> Detalhes </th>
                        <td mat-cell *matCellDef="let appointment"> 
                          <button mat-mini-fab matTooltip="Ver detalhes" color="primary" (click)="openSessionsDetailsDialog(appointment.id)">
                            <mat-icon><span class="material-symbols-outlined">
                                edit_note
                                </span></mat-icon>
                          </button>
                        </td>
                      </ng-container>  

                    <tr mat-header-row *matHeaderRowDef="appointmentsColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: appointmentsColumns;"></tr>
                  </table>
        </mat-card>
    
        <mat-card>
            <mat-card-header>
                <mat-card-title>Pacientes</mat-card-title>
            </mat-card-header>
            <table mat-table [dataSource]="patients" class="mat-elevation-z8">
                  
                <ng-container matColumnDef="name">
                  <th mat-header-cell *matHeaderCellDef> Nome </th>
                  <td mat-cell *matCellDef="let patient"> {{patient.name }} </td>
                </ng-container>
        
                <ng-container matColumnDef="phoneNumber">
                  <th mat-header-cell *matHeaderCellDef> Celular </th>
                  <td mat-cell *matCellDef="let patient"> {{patient.phoneNumber}} </td>
                </ng-container>
        
                <ng-container matColumnDef="birthDate">
                  <th mat-header-cell *matHeaderCellDef> Data Nascimento </th>
                  <td mat-cell *matCellDef="let patient"> {{patient.birthDate | date : 'dd/MM/yyyy'}} </td>
                </ng-container>
        
                <ng-container matColumnDef="email">
                  <th mat-header-cell *matHeaderCellDef> Email </th>
                  <td mat-cell *matCellDef="let patient"> {{ patient.email}} </td>
                </ng-container>
                
                <ng-container matColumnDef="view">
                    <th mat-header-cell *matHeaderCellDef> Detalhes </th>
                    <td mat-cell *matCellDef="let patient"> 
                      <button mat-mini-fab matTooltip="Ver detalhes" color="primary" (click)="openPatientDetailsDialog(patient.id)">
                        <mat-icon><span class="material-symbols-outlined">
                            edit_note
                            </span></mat-icon>
                      </button>
                    </td>
                  </ng-container>  

                <tr mat-header-row *matHeaderRowDef="patientsColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: patientsColumns;"></tr>
              </table>
        </mat-card>
    </section>
</main>

